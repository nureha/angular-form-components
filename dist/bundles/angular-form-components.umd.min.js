!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/operators"),require("rxjs/ReplaySubject"),require("rxjs/Subscription"),require("@angular/common"),require("components/single-checkbox/single-checkbox.component")):"function"==typeof define&&define.amd?define("angular-form-components",["exports","@angular/core","@angular/forms","rxjs/Observable","rxjs/Subject","rxjs/operators","rxjs/ReplaySubject","rxjs/Subscription","@angular/common","components/single-checkbox/single-checkbox.component"],t):t(e["angular-form-components"]={},e.ng.core,e.ng.forms,e.Rx,e.Rx,e.Rx.Observable.prototype,e.Rx,e.Rx,e.ng.common,e.singleCheckbox_component)}(this,function(e,r,n,t,o,i,a,l,s,u){"use strict";var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function p(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(l){o={error:l}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var h=function(){function e(){this.type="text",this._readonly=!1}return Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.formControl.validator&&this.formControl.validator(new n.FormControl);this.required=!!e&&!!e.required},e.prototype.writeValue=function(e){},e.prototype.registerOnChange=function(e){},e.prototype.registerOnTouched=function(e){},e}();h.decorators=[{type:r.Component,args:[{selector:"afm-input",template:'<label *ngIf="label"><span *ngIf="required">*&nbsp;</span>{{ label }}</label>\n<input class="form-control"\n  [type]="type" [formControl]="formControl" [readonly]="readonly">\n<validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n',styles:[""],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return h}),multi:!0}]}]}],h.ctorParameters=function(){return[]},h.propDecorators={formControl:[{type:r.Input}],label:[{type:r.Input}],type:[{type:r.Input}],readonly:[{type:r.Input}]};var m=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();m.decorators=[{type:r.Component,args:[{selector:"validate-message",template:'<span [hidden]="!control.touched || control.valid"><ng-content></ng-content></span>\n',styles:['span{position:absolute;color:#fff;top:-15px;right:-10px;padding:7px;background-color:#bd362f;border-radius:7px}span:before{content:"";position:absolute;top:100%;left:50%;margin-left:-7px;border:7px solid transparent;border-top:7px solid #bd362f}']}]}],m.ctorParameters=function(){return[]},m.propDecorators={control:[{type:r.Input}]};var y=function(){function e(){}return e.prototype.ngOnInit=function(){var e=this.formControl.validator&&this.formControl.validator(new n.FormControl);this.required=e&&!!e.required},e.prototype.writeValue=function(e){},e.prototype.registerOnChange=function(e){},e.prototype.registerOnTouched=function(e){},e}();function g(e,t){var r=(e||0).toString().split("."),n="";if(/^-/.test(r[0])&&(n="-",r[0]=r[0].substring(1)),r[1]&&/e-/.test(r[1])){var o=r[1].split("e-");r[1]="0.";for(var i=1;i<parseInt(o[1],10);++i)r[1]+="0";r[1]+=o[0].replace(".","")}if(0<t)return r[1]?r[1].length<=t?parseInt(n+r[0]+r[1],10)*Math.pow(10,t-r[1].length):parseFloat(n+r[0]+r[1].substr(0,t)+"."+r[1].substr(t,r[1].length-t)):e*Math.pow(10,t);var a="0.";if("0"===r[0]){for(i=0;t<i;--i)a+="0";return parseFloat(n+a+r[1])}if(r[0].length<=-t){for(i=0;i>t+r[0].length;--i)a+="0";return parseFloat(n+a+r[0]+r[1])}return parseFloat(n+r[0].substr(0,r[0].length+t)+"."+r[0].substr(r[0].length+t,-t)+r[1])}function b(e,t){return void 0===t&&(t=-1),"object"==typeof e?"":(-1<t&&(e=g(Math.round(g(e,t)),-t)),e.toString().split(".").map(function(e,t){return 0<t?e:e.split("").reverse().map(function(e,t){return e+(t&&t%3==0&&"-"!==e?",":"")}).reverse().join("")}).join("."))}y.decorators=[{type:r.Component,args:[{selector:"afm-textarea",template:'<label *ngIf="label"><span *ngIf="required">*&nbsp;</span>{{ label }}</label>\n<textarea [formControl]="formControl" class="form-control"></textarea>\n<validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n',styles:[""],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return y}),multi:!0}]}]}],y.ctorParameters=function(){return[]},y.propDecorators={formControl:[{type:r.Input}],label:[{type:r.Input}]};var v=function(){function e(e,t){this.renderer=e,this.elm=t,this.type="number",this.afterPointNum=2,this.blur=new r.EventEmitter,this.innerFormControl=new n.FormControl,this._readonly=!1,this.onChangePropagate=function(){}}return Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e,this.onBlur(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatedValue",{get:function(){return"percent"===this.type?b(this.innerFormControl.value)+"%":b(this.innerFormControl.value)},enumerable:!0,configurable:!0}),e.prototype.onKeyDown=function(e){switch(e){case"t":this.innerFormControl.patchValue(g(this.innerFormControl.value,3));break;case"m":this.innerFormControl.patchValue(g(this.innerFormControl.value,6))}},e.prototype.ngOnInit=function(){var t=this,e=this.formControl.validator&&this.formControl.validator(new n.FormControl);this.required=!!e&&!!e.required,this.innerFormControl.setValidators(this.formControl.validator);var r=Array.prototype.filter.call(this.elm.nativeElement.childNodes,function(e){return"INPUT"===e.nodeName});this.realInput=r[0],this.dummyInput=r[1],this.innerFormControl.valueChanges.subscribe(function(e){"percent"===t.type&&(e=g(e,-t.afterPointNum)),e!==t.formControl.value&&t.onChangePropagate(e)})},e.prototype.ngAfterViewInit=function(){this.onBlur(!0)},e.prototype.onBlur=function(e){void 0===e&&(e=!1),this.realInput&&(""===this.innerFormControl.value&&this.innerFormControl.patchValue(0),this.renderer.setStyle(this.realInput,"display","none"),this.renderer.setStyle(this.dummyInput,"display","inherit"),this.renderer.setProperty(this.dummyInput,"value",this.formatedValue)),e||this.blur.emit()},e.prototype.onFocus=function(){this.readonly||(this.renderer.setStyle(this.dummyInput,"display","none"),this.renderer.setStyle(this.realInput,"display","inherit"),0===this.innerFormControl.value&&this.innerFormControl.patchValue(""),this.elm.nativeElement.fucus&&this.elm.nativeElement.fucus())},e.prototype.writeValue=function(e){"percent"===this.type&&(e=g(e,this.afterPointNum)),this.innerFormControl.patchValue(e),this.renderer.setProperty(this.dummyInput,"value",this.formatedValue)},e.prototype.registerOnChange=function(e){this.onChangePropagate=e},e.prototype.registerOnTouched=function(e){},e}();v.decorators=[{type:r.Component,args:[{selector:"afm-number",template:'<label *ngIf="label"><span *ngIf="required">*&nbsp;</span>{{ label }}</label>\n<input class="form-control"\n  (blur)="onBlur()"\n  type="number" [formControl]="innerFormControl">\n<input class="form-control" (focus)="onFocus()" [readonly]="readonly">\n<validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n',styles:[""],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return v}),multi:!0}]}]}],v.ctorParameters=function(){return[{type:r.Renderer2},{type:r.ElementRef}]},v.propDecorators={formControl:[{type:r.Input}],label:[{type:r.Input}],type:[{type:r.Input}],afterPointNum:[{type:r.Input}],readonly:[{type:r.Input}],blur:[{type:r.Output}],onKeyDown:[{type:r.HostListener,args:["keydown",["$event.key"]]}]};var C=function(){function r(e,t,r){var n=this;this.ob=e,this._target=t,this._type=r,this.action$=new o.Subject,this._regExp=RegExp(".*"),this._and=[],this._or=[],e.subscribe(function(e){n._val=e,n._regExp=new RegExp(e)}),this._onChange=this.action$.pipe(i.merge(e))}return Object.defineProperty(r.prototype,"onChange",{get:function(){return this._onChange},enumerable:!0,configurable:!0}),r.match=function(e,t){return new r(e.valueChanges,t,"~")},r.equal=function(e,t){return new r(e.valueChanges,t,"=")},r.graterThan=function(e,t){return new r(e.valueChanges,t,">")},r.over=function(e,t){return new r(e.valueChanges,t,">=")},r.lessThan=function(e,t){return new r(e.valueChanges,t,"<")},r.under=function(e,t){return new r(e.valueChanges,t,"<=")},r.prototype.check=function(e){if(!(this._target in e))return!1;if(!this._val)return!0;switch(this._type){case"~":return!this._val||this._regExp.test(e[this._target]);case"=":return e[this._target]===this._val;case">":return e[this._target]>this._val;case">=":return e[this._target]>=this._val;case"<":return e[this._target]<this._val;case"<=":return e[this._target]<=this._val}return!0},r.prototype.checkAll=function(t){return 0<this._or.length&&this._or.some(function(e){return e.checkAll(t)})||this.check(t)&&!this._and.some(function(e){return!e.checkAll(t)})},r.prototype.trigger=function(){this.action$.next(!0)},r.prototype.filter=function(e){var t=this;return e.filter(function(e){return t.checkAll(e)})},r.prototype.and=function(e){return this._and.push(e),this._onChange=this._onChange.pipe(i.merge(e.onChange)),this},r.prototype.or=function(e){return this._or.push(e),this._onChange=this._onChange.pipe(i.merge(e.onChange)),this},r}();C.decorators=[{type:r.Injectable}],C.ctorParameters=function(){return[{type:t.Observable},null,null]};var _=function(){function e(){}return Object.defineProperty(e.prototype,"forSelectName",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectValue",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectDefault",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectOrder",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),e}(),S=new r.InjectionToken("MULTI_IMPORT_SERVICES_MAP"),I=function(){function e(e,t){this.injector=e,this.services=t,this.providers=Array.from(this.services.map.values())}return e.prototype.get=function(e){var t=this.services.map.get(e);if(t)return r.ReflectiveInjector.resolveAndCreate(this.providers,this.injector).get(t);throw new Error(e+" is not provided!")},e}();I.decorators=[{type:r.Injectable}],I.ctorParameters=function(){return[{type:r.Injector},{type:undefined,decorators:[{type:r.Inject,args:[S]}]}]};var V=function(r){function e(e){var t=r.call(this)||this;return t.name=e.name,t.value=e.value,t["default"]=e["default"],t.sort=e.sort!==undefined?e.sort:e.name,t}return p(e,r),Object.defineProperty(e.prototype,"forSelectName",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectValue",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectDefault",{get:function(){return this["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectOrder",{get:function(){return this.sort},enumerable:!0,configurable:!0}),e}(_),x=function(){function e(){this.action$=new a.ReplaySubject(1)}return e.prototype.list=function(){return this.action$.pipe(i.share())},e.prototype.query=function(e){this.action$.next(e.map(function(e){return e instanceof _?e:new V(e)}))},e}(),w=0,j=function(){function e(e){var r=this;this.services=e,this.list=[],this.rejects=[],this.innerFormControl=new n.FormControl,this.dataPrepared$=new o.Subject,this.writeValue$=new o.Subject,this.subscriptions=new l.Subscription,this.initialized$=new o.Subject,this.onChangeEventPrepared$=new o.Subject,this.defaultValue=null,this.onChangePropagate=function(){},this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e})).pipe(i.combineLatest(this.initialized$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.onChangeEventPrepared$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.writeValue$)).subscribe(function(e){var t=e[1];t||0===t?("object"==typeof t&&t.forSelectValue&&(t=t.forSelectValue),r.innerFormControl.patchValue(t),r.validateInnerFormValue()||r.innerFormControl.patchValue(r.defaultValue?r.defaultValue.forSelectValue:r.defaultValue)):(r.innerFormControl.value||0===r.innerFormControl.value)&&(r.value=r.innerFormControl.value)})),this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e})).pipe(i.combineLatest(this.initialized$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.onChangeEventPrepared$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.innerFormControl.valueChanges)).subscribe(function(t){r.data&&"object"===r.valueType&&(t[1]=r.data.find(function(e){return e.forSelectValue===t[1]})),r.value=t[1]}))}return Object.defineProperty(e.prototype,"value",{set:function(e){this.onChangePropagate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_required",{get:function(){var e=this.formControl.validator&&this.formControl.validator(new n.FormControl);return this.required=!!e&&!!e.required,this.required?this.innerFormControl.setValidators(n.Validators.required):this.innerFormControl.clearValidators(),this.required},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.id="_AfmSelect_"+w.toString(),w++,this.required=this._required,this.subscriptions.add(this.observer().subscribe(function(e){e.sort(function(e,t){return e.forSelectOrder>t.forSelectOrder?1:e.forSelectOrder<t.forSelectOrder?-1:0}),t.defaultValue=null,t.data=e.filter(function(e){return 0===t.rejects.length||-1===t.rejects.indexOf(e.forSelectValue)}).map(function(e){return(e.forSelectDefault||null===t.defaultValue)&&(t.defaultValue=e),e}),t.dataPrepared$.next(!0),t.validateInnerFormValue()||(t._required?t.writeValue$.next(t.defaultValue?t.defaultValue.forSelectValue:t.defaultValue):t.value=null)})),this.query(),this.initialized$.next(!0)},e.prototype.ngOnChanges=function(e){(e.sourceName&&e.sourceName.currentValue!==e.sourceName.previousValue||e.list&&e.list.currentValue.length!==e.list.previousValue.length||e.rejects&&e.rejects.currentValue.length!==e.rejects.previousValue.length)&&this._service&&this.query()},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},e.prototype.query=function(){this.dataPrepared$.next(!1);var e=this._parse(this.sourceName);"list"!==e.name&&"range"!==e.name||!this.list?this._service.query(e.query):this._service.query(this.list)},e.prototype.existsInSelector=function(t){return!(!t&&0!==t)&&this.data.some(function(e){return e.forSelectValue===t})},e.prototype.observer=function(){if(!this._service){var e=this._parse(this.sourceName);if("list"===e.name)this._service=new x;else if("range"===e.name){if(e.query.to===undefined)throw Error("range.to is required");e.query.from=parseInt(e.query.from||0,10),e.query.to=parseInt(e.query.to||0,10),e.query["default"]=parseInt(e.query["default"]||0,10),e.query.step=parseInt(e.query.step||1,10),e.query.unit=e.query.unit||"",this.list=[];for(var t=e.query.from;t<=e.query.to;t+=e.query.step)this.list.push({name:t.toString()+e.query.unit,value:t,"default":t===e.query["default"]});this._service=new x}else{var r=this.services.get(e.name);if(!r)throw Error("not exists service: "+e.name);this._service=r}}return this._service.list()},e.prototype._parse=function(e){var t=e.split(":"),r={};return t[1]&&t[1].split("&").forEach(function(e){var t=e.split("=");r[t[0]]!==undefined?(r[t[0]]instanceof Array||(r[t[0]]=[r[t[0]]]),r[t[0]].push(t[1])):r[t[0]]=t[1]}),{name:t[0],query:r}},e.prototype.validateInnerFormValue=function(){return!(this._required&&!this.innerFormControl.value&&0!==this.innerFormControl.value||!this.existsInSelector(this.innerFormControl.value)&&(this.innerFormControl.value||0===this.innerFormControl.value))},e.prototype.writeValue=function(e){this.isEffectiveValue(e)||!this._required?this.writeValue$.next(e):this.isEffectiveValue(this.defaultValue)?this.writeValue$.next(this.defaultValue.forSelectValue):this.isEffectiveValue(this.innerFormControl.value)&&this.writeValue$.next(this.innerFormControl.value)},e.prototype.registerOnChange=function(e){this.onChangePropagate=e,this.onChangeEventPrepared$.next(!0)},e.prototype.registerOnTouched=function(e){},e.prototype.isEffectiveValue=function(e){return!!e||0===e},e}(),O=function(t){function e(e){var r=t.call(this,e)||this;return r.valueType="number",r.list=[],r.rejects=[],r.selected=null,r._readonly=!1,r.dataPrepared$.pipe(i.filter(function(e){return!!e}),i.combineLatest(r.innerFormControl.valueChanges)).subscribe(function(t){r.selected=r.data.find(function(e){return e.forSelectValue===t[1]})}),r}return p(e,t),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),e}(j);O.decorators=[{type:r.Component,args:[{selector:"afm-select",template:'<label *ngIf="label" [htmlFor]="id"><span [hidden]="!required">*&nbsp;</span>{{ label }}</label>\n<ng-container *ngIf="!readonly">\n  <select [id]="id" class="form-control" [formControl]="innerFormControl" [required]="required">\n    <option *ngIf="!required" [ngValue]="null"></option>\n    <option *ngFor="let item of data" [ngValue]="item.forSelectValue" [innerHtml]="item.forSelectName"></option>\n  </select>\n  <validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n</ng-container>\n<ng-container *ngIf="readonly">\n  <span class="form-control" readonly [innerHtml]="selected?.forSelectName"></span>\n</ng-container>\n',styles:["label.margin-bottom{margin-bottom:20px}span.selected{text-decoration:underline;-webkit-text-decoration-style:double;text-decoration-style:double}p.fit{margin-bottom:0}"],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return O}),multi:!0},I]}]}],O.ctorParameters=function(){return[{type:I}]},O.propDecorators={formControl:[{type:r.Input}],sourceName:[{type:r.Input}],label:[{type:r.Input}],valueType:[{type:r.Input}],list:[{type:r.Input}],rejects:[{type:r.Input}],readonly:[{type:r.Input}]};var P=function(t){function e(e){var r=t.call(this,e)||this;return r.valueType="number",r.rejects=[],r.placeholder="",r._readonly=!1,r.selected=null,r._data=[],r.valueTrigger$=new o.Subject,r.preparedElement$=new o.Subject,r.mySubscriptions=new l.Subscription,r.onChangePropagate=function(){},r.mySubscriptions.add(r.dataPrepared$.pipe(i.combineLatest(r.preparedElement$),i.filter(function(e){return!!e[0]&&!!e[1]}),i.combineLatest(r.valueTrigger$),i.delay(0)).subscribe(function(t){r.element&&r.element.val(t[1]).trigger("change").trigger("select2:select"),r.selected=r._data.find(function(e){return e.forSelectValue===t[1]})})),r}return p(e,t),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.renderSelect2()},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var r=this;this.selector&&(this.element=jQuery(this.selector.nativeElement),this.renderSelect2(),this.element.on("select2:select",function(){var t=r.selector.nativeElement.value;/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),r._value!==t&&("object"===r.valueType&&(t=r.data.find(function(e){return e.forSelectValue===t})),r._value=t,r.onChangePropagate(t))})),this.preparedElement$.next(!0),this.mySubscriptions.add(this.innerFormControl.valueChanges.subscribe(function(e){r.valueTrigger$.next(e)}))},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.mySubscriptions.unsubscribe(),this.element&&this.element.off("select2:select")},e.prototype.renderSelect2=function(){this.element&&(!0===this.element.hasClass("select2-hidden-accessible")&&(this.element.select2("destroy"),this.element.html("")),this.element.select2({data:this._data.map(function(e){return{id:e.forSelectValue,text:e.forSelectName}}),theme:"bootstrap",placeholder:this.placeholder,allowClear:!this._required}),this.valueTrigger$.next(this.formControl.value))},e}(j);P.decorators=[{type:r.Component,args:[{selector:"afm-select2",template:'<label><span [hidden]="!required">*&nbsp;</span>{{ label }}</label>\n<ng-container *ngIf="!readonly">\n  <div>\n    <select #selector class="form-control"></select>\n    <validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n  </div>\n</ng-container>\n<ng-container *ngIf="readonly">\n  <span class="form-control" readonly [innerHtml]="selected?.forSelectName"></span>\n</ng-container>\n',styles:[""],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return P}),multi:!0},I]}]}],P.ctorParameters=function(){return[{type:I}]},P.propDecorators={formControl:[{type:r.Input}],sourceName:[{type:r.Input}],label:[{type:r.Input}],valueType:[{type:r.Input}],list:[{type:r.Input}],rejects:[{type:r.Input}],placeholder:[{type:r.Input}],readonly:[{type:r.Input}],selector:[{type:r.ViewChild,args:["selector"]}]};var q=function(r){function e(e){var t=r.call(this,e)||this;return t.valueType="number",t.list=[],t.rejects=[],t.filteredData=[],t.width="",t.selectedNames=[],t._detaPrepared=!1,t.dataPrepared$.subscribe(function(e){return t._detaPrepared=!!e}),t}return p(e,r),Object.defineProperty(e.prototype,"value",{get:function(){return this._value instanceof Array?this._value:[this._value]},set:function(e){var t=this;this._value=e instanceof Array?e:null!==e?[e]:[],this.onChangePropagate(this.value),this.selectedNames=this.data.filter(function(e){return-1!==t._value.indexOf(e.forSelectValue)}).map(function(e){return e.forSelectName})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;r.prototype.ngOnInit.call(this),this.filter?(this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e}),i.combineLatest(this.filter.onChange),i.delay(0)).subscribe(function(e){t.filteredData=t.filter.filter(t.data),9<t.filteredData.length&&(t.width=(15*t.filteredData.reduce(function(e,t){return e<t.forSelectName.length?t.forSelectName.length:e},0)).toString()+"px")})),this.filter.trigger()):this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e})).subscribe(function(e){t.filteredData=t.data.filter(function(e){return!0})})),this._detaPrepared&&this.dataPrepared$.next(!0)},e.prototype.onChange=function(e,t){e.target.checked?("object"===this.valueType&&(t=this.data.find(function(e){return e.forSelectValue===t})),this.value=d(this.value.filter(function(e){return!!e}),[t])):"object"===this.valueType?this.value=this.value.filter(function(e){return!!e&&e.value!==t}):this.value=this.value.filter(function(e){return e!==t})},e.prototype.allCheck=function(){var t=this;this.value=d(this._value,this.filteredData.filter(function(e){return-1===t._value.indexOf(e.forSelectValue)}).map(function(e){return e.forSelectValue}))},e.prototype.allClear=function(){var t=this.filteredData.map(function(e){return e.forSelectValue});this.value=this._value.filter(function(e){return-1===t.indexOf(e)})},e.prototype.existsInSelector=function(e){var r=this,t=!e||e instanceof Array?e:[e];return!t||!t.length||t.reduce(function(e,t){return e||r.data.some(function(e){return e.forSelectValue===t})},!1)},e.prototype.writeValue=function(e){this._value=e,this.innerFormControl.patchValue(e)},e}(j);q.decorators=[{type:r.Component,args:[{selector:"afm-checkbox",template:'<p>{{ label }}</p>\n<div *ngIf="!!filter">\n  <div class="form-group col-md-12">\n    <div class="col-md-2">\n      <p class="fit">表示中の選択肢すべてを</p>\n      <button type="button" class="btn btn-info btn-sm" (click)="allCheck()">選択</button>\n      <button type="button" class="btn btn-warning btn-sm" (click)="allClear()">クリア</button>\n    </div>\n  </div>\n</div>\n<label class="checkbox-inline hidden"></label>\n<label htmlFor="{{ id }}_{{ item.forSelectValue }}" *ngFor="let item of filteredData"\n    class="checkbox-inline custom-checkbox nowrap margin-bottom">\n  <input id="{{ id }}_{{ item.forSelectValue }}" type="checkbox" class="form-control"\n    (change)="onChange($event, item.forSelectValue)" [checked]="value.indexOf(item.forSelectValue) !== -1">\n  <span [ngClass]="{\'selected\': value.indexOf(item.forSelectValue) !== -1}"\n    [style.width]="width" [innerHtml]="item.forSelectName"></span>\n</label>\n<br>\n<validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n',styles:["label.margin-bottom{margin-bottom:20px}span.selected{text-decoration:underline;-webkit-text-decoration-style:double;text-decoration-style:double}p.fit{margin-bottom:0}"],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return q}),multi:!0},I]}]}],q.ctorParameters=function(){return[{type:I}]},q.propDecorators={formControl:[{type:r.Input}],sourceName:[{type:r.Input}],label:[{type:r.Input}],valueType:[{type:r.Input}],list:[{type:r.Input}],rejects:[{type:r.Input}],filter:[{type:r.Input}]};var F=function(r){function e(e){var t=r.call(this,e)||this;return t.valueType="number",t.list=[],t.rejects=[],t}return p(e,r),e}(j);F.decorators=[{type:r.Component,args:[{selector:"afm-radio",template:'<p *ngIf="!!label"><span [hidden]="!required">*&nbsp;</span>{{ label }}</p>\n<label htmlFor="{{ id }}_{{ item.forSelectValue }}" *ngFor="let item of data" class="radio-inline custom-radio nowrap">\n  <input id="{{ id }}_{{ item.forSelectValue }}" type="radio" class="form-control" name="{{ id }}"\n    [value]="item.forSelectValue" [formControl]="innerFormControl">\n  <span [innerHtml]="item.forSelectName"></span>\n</label>\n<br>\n<validate-message [control]="formControl"><ng-content></ng-content></validate-message>\n',styles:["label.margin-bottom{margin-bottom:20px}span.selected{text-decoration:underline;-webkit-text-decoration-style:double;text-decoration-style:double}p.fit{margin-bottom:0}"],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return F}),multi:!0},I]}]}],F.ctorParameters=function(){return[{type:I}]},F.propDecorators={formControl:[{type:r.Input}],sourceName:[{type:r.Input}],label:[{type:r.Input}],valueType:[{type:r.Input}],list:[{type:r.Input}],rejects:[{type:r.Input}]};var E=[h,v,y,m,O,q,F,P,u.AfmSingleCheckboxComponent],$=function(){};$.decorators=[{type:r.NgModule,args:[{imports:[s.CommonModule,n.FormsModule,n.ReactiveFormsModule],providers:[],declarations:d(E),exports:d(E)}]}],e.COMPONENTS=E,e.AngularFormComponentsModule=$,e.FilterService=C,e.Selectable=_,e.MULTI_IMPORT_SERVICES_MAP=S,e.SelectorServiceInjector=I,e.ɵa=h,e.ɵb=v,e.ɵf=q,e.ɵg=F,e.ɵh=P,e.ɵe=O,e.ɵc=y,e.ɵd=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-form-components.umd.min.js.map

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("rxjs/Subject"),require("rxjs/operators"),require("rxjs/ReplaySubject"),require("rxjs/Subscription"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-form-components",["exports","@angular/core","@angular/forms","rxjs/Subject","rxjs/operators","rxjs/ReplaySubject","rxjs/Subscription","@angular/common"],t):t(e["angular-form-components"]={},e.ng.core,e.ng.forms,e.Rx,e.Rx.Observable.prototype,e.Rx,e.Rx,e.ng.common)}(this,function(e,n,r,o,i,t,a,l){"use strict";var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function u(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var f=function(){function e(){this.type="text",this._readonly=!1}return Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.formControl.validator&&this.formControl.validator(new r.FormControl);this.required=!!e&&!!e.required},e.prototype.writeValue=function(e){},e.prototype.registerOnChange=function(e){},e.prototype.registerOnTouched=function(e){},e}();function h(e,t){var n=(e||0).toString().split("."),r="";if(/^-/.test(n[0])&&(r="-",n[0]=n[0].substring(1)),n[1]&&/e-/.test(n[1])){var o=n[1].split("e-");n[1]="0.";for(var i=1;i<parseInt(o[1],10);++i)n[1]+="0";n[1]+=o[0].replace(".","")}if(0<t)return n[1]?n[1].length<=t?parseInt(r+n[0]+n[1],10)*Math.pow(10,t-n[1].length):parseFloat(r+n[0]+n[1].substr(0,t)+"."+n[1].substr(t,n[1].length-t)):e*Math.pow(10,t);var a="0.";if("0"===n[0]){for(i=0;t<i;--i)a+="0";return parseFloat(r+a+n[1])}if(n[0].length<=-t){for(i=0;i>t+n[0].length;--i)a+="0";return parseFloat(r+a+n[0]+n[1])}return parseFloat(r+n[0].substr(0,n[0].length+t)+"."+n[0].substr(n[0].length+t,-t)+n[1])}function d(e,t){return void 0===t&&(t=-1),"object"==typeof e?"":(-1<t&&(e=h(Math.round(h(e,t)),-t)),e.toString().split(".").map(function(e,t){return 0<t?e:e.split("").reverse().map(function(e,t){return e+(t&&t%3==0&&"-"!==e?",":"")}).reverse().join("")}).join("."))}f.decorators=[{type:n.Component,args:[{selector:"afc-input",template:'\n    <label *ngIf="label"><span *ngIf="required">*&nbsp;</span>{{ label }}</label>\n    <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n    <input class="form-control"\n      [type]="type" [formControl]="formControl" [readonly]="readonly">\n  ',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return f}),multi:!0}]}]}],f.ctorParameters=function(){return[]},f.propDecorators={formControl:[{type:n.Input}],label:[{type:n.Input}],type:[{type:n.Input}],readonly:[{type:n.Input}]};var m=function(){function e(e,t){this.renderer=e,this.elm=t,this.type="number",this.afterPointNum=2,this.blur=new n.EventEmitter,this.innerFormControl=new r.FormControl,this._readonly=!1,this.onChangePropagate=function(){}}return Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e,this.onBlur(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatedValue",{get:function(){return"percent"===this.type?d(this.innerFormControl.value)+"%":d(this.innerFormControl.value)},enumerable:!0,configurable:!0}),e.prototype.onKeyDown=function(e){switch(e){case"t":this.innerFormControl.patchValue(h(this.innerFormControl.value,3));break;case"m":this.innerFormControl.patchValue(h(this.innerFormControl.value,6))}},e.prototype.ngOnInit=function(){var t=this,e=this.formControl.validator&&this.formControl.validator(new r.FormControl);this.required=!!e&&!!e.required,this.innerFormControl.setValidators(this.formControl.validator);var n=Array.prototype.filter.call(this.elm.nativeElement.childNodes,function(e){return"INPUT"===e.nodeName});this.realInput=n[0],this.dummyInput=n[1],this.innerFormControl.valueChanges.subscribe(function(e){"percent"===t.type&&(e=h(e,-t.afterPointNum)),e!==t.formControl.value&&t.onChangePropagate(e)})},e.prototype.ngAfterViewInit=function(){this.onBlur(!0)},e.prototype.onBlur=function(e){void 0===e&&(e=!1),this.realInput&&(""===this.innerFormControl.value&&this.innerFormControl.patchValue(0),this.renderer.setStyle(this.realInput,"display","none"),this.renderer.setStyle(this.dummyInput,"display","inherit"),this.renderer.setProperty(this.dummyInput,"value",this.formatedValue)),e||this.blur.emit()},e.prototype.onFocus=function(){this.readonly||(this.renderer.setStyle(this.dummyInput,"display","none"),this.renderer.setStyle(this.realInput,"display","inherit"),0===this.innerFormControl.value&&this.innerFormControl.patchValue(""),this.elm.nativeElement.fucus&&this.elm.nativeElement.fucus())},e.prototype.writeValue=function(e){"percent"===this.type&&(e=h(e,this.afterPointNum)),this.innerFormControl.patchValue(e),this.renderer.setProperty(this.dummyInput,"value",this.formatedValue)},e.prototype.registerOnChange=function(e){this.onChangePropagate=e},e.prototype.registerOnTouched=function(e){},e}();m.decorators=[{type:n.Component,args:[{selector:"afc-number",template:'\n    <label *ngIf="label"><span *ngIf="required">*&nbsp;</span>{{ label }}</label>\n    <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n    <input class="form-control"\n      (blur)="onBlur()"\n      type="number" [formControl]="innerFormControl">\n    <input class="form-control" (focus)="onFocus()" [readonly]="readonly">\n  ',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return m}),multi:!0}]}]}],m.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]},m.propDecorators={formControl:[{type:n.Input}],label:[{type:n.Input}],type:[{type:n.Input}],afterPointNum:[{type:n.Input}],readonly:[{type:n.Input}],blur:[{type:n.Output}],onKeyDown:[{type:n.HostListener,args:["keydown",["$event.key"]]}]};var y=function(){function n(e,t,n){var r=this;this.ob=e,this._target=t,this._type=n,this.action$=new o.Subject,this._regExp=RegExp(".*"),this._and=[],this._or=[],e.subscribe(function(e){r._val=e,r._regExp=new RegExp(e)}),this._onChange=this.action$.pipe(i.merge(e))}return Object.defineProperty(n.prototype,"onChange",{get:function(){return this._onChange},enumerable:!0,configurable:!0}),n.match=function(e,t){return new n(e.valueChanges,t,"~")},n.equal=function(e,t){return new n(e.valueChanges,t,"=")},n.graterThan=function(e,t){return new n(e.valueChanges,t,">")},n.over=function(e,t){return new n(e.valueChanges,t,">=")},n.lessThan=function(e,t){return new n(e.valueChanges,t,"<")},n.under=function(e,t){return new n(e.valueChanges,t,"<=")},n.prototype.check=function(e){if(!(this._target in e))return!1;if(!this._val)return!0;switch(this._type){case"~":return!this._val||this._regExp.test(e[this._target]);case"=":return e[this._target]===this._val;case">":return e[this._target]>this._val;case">=":return e[this._target]>=this._val;case"<":return e[this._target]<this._val;case"<=":return e[this._target]<=this._val}return!0},n.prototype.checkAll=function(t){return 0<this._or.length&&this._or.some(function(e){return e.checkAll(t)})||this.check(t)&&!this._and.some(function(e){return!e.checkAll(t)})},n.prototype.trigger=function(){this.action$.next(!0)},n.prototype.filter=function(e){var t=this;return e.filter(function(e){return t.checkAll(e)})},n.prototype.and=function(e){return this._and.push(e),this._onChange=this._onChange.pipe(i.merge(e.onChange)),this},n.prototype.or=function(e){return this._or.push(e),this._onChange=this._onChange.pipe(i.merge(e.onChange)),this},n}(),g=function(){function e(){}return Object.defineProperty(e.prototype,"forSelectName",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectValue",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectDefault",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectOrder",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),e}(),b=new n.InjectionToken("MULTI_IMPORT_SERVICES_MAP"),v=function(){function e(e,t){this.injector=e,this.services=t,this.providers=Array.from(this.services.map.values())}return e.prototype.get=function(e){var t=this.services.map.get(e);if(t)return n.ReflectiveInjector.resolveAndCreate(this.providers,this.injector).get(t);throw new Error(e+" is not provided!")},e}();v.decorators=[{type:n.Injectable}],v.ctorParameters=function(){return[{type:n.Injector},{type:undefined,decorators:[{type:n.Inject,args:[b]}]}]};var C=new n.InjectionToken("ERROR_MESSAGE_FACTORY_SERVICE"),_=function(){function e(){}return e.prototype.create=function(e,t){return[]},e}();_.decorators=[{type:n.Injectable}],_.ctorParameters=function(){return[]};var S=function(n){function e(e){var t=n.call(this)||this;return t.name=e.name,t.value=e.value,t["default"]=e["default"],t.sort=e.sort!==undefined?e.sort:e.name,t}return u(e,n),Object.defineProperty(e.prototype,"forSelectName",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectValue",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectDefault",{get:function(){return this["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forSelectOrder",{get:function(){return this.sort},enumerable:!0,configurable:!0}),e}(g),I=function(){function e(){this.action$=new t.ReplaySubject(1)}return e.prototype.list=function(){return this.action$.pipe(i.share())},e.prototype.query=function(e){this.action$.next(e.map(function(e){return e instanceof g?e:new S(e)}))},e}(),V=0,x=function(){function e(e){var n=this;this.services=e,this.list=[],this.rejects=[],this.innerFormControl=new r.FormControl,this.dataPrepared$=new o.Subject,this.writeValue$=new o.Subject,this.subscriptions=new a.Subscription,this.initialized$=new o.Subject,this.onChangeEventPrepared$=new o.Subject,this.defaultValue=null,this.onChangePropagate=function(){},this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e})).pipe(i.combineLatest(this.initialized$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.onChangeEventPrepared$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.writeValue$)).subscribe(function(e){var t=e[1];t||0===t?("object"==typeof t&&t.forSelectValue&&(t=t.forSelectValue),n.innerFormControl.patchValue(t),n.validateInnerFormValue()||n.innerFormControl.patchValue(n.defaultValue?n.defaultValue.forSelectValue:n.defaultValue)):(n.innerFormControl.value||0===n.innerFormControl.value)&&(n.value=n.innerFormControl.value)})),this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e})).pipe(i.combineLatest(this.initialized$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.onChangeEventPrepared$.pipe(i.filter(function(e){return!!e}))),i.combineLatest(this.innerFormControl.valueChanges)).subscribe(function(t){n.data&&"object"===n.valueType&&(t[1]=n.data.find(function(e){return e.forSelectValue===t[1]})),n.value=t[1]}))}return Object.defineProperty(e.prototype,"value",{set:function(e){this.onChangePropagate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_required",{get:function(){var e=this.formControl.validator&&this.formControl.validator(new r.FormControl);return this.required=!!e&&!!e.required,this.required?this.innerFormControl.setValidators(r.Validators.required):this.innerFormControl.clearValidators(),this.required},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.id="_AfcSelect_"+V.toString(),V++,this.required=this._required,this.subscriptions.add(this.observer().subscribe(function(e){e.sort(function(e,t){return e.forSelectOrder>t.forSelectOrder?1:e.forSelectOrder<t.forSelectOrder?-1:0}),t.defaultValue=null,t.data=e.filter(function(e){return 0===t.rejects.length||-1===t.rejects.indexOf(e.forSelectValue)}).map(function(e){return(e.forSelectDefault||null===t.defaultValue)&&(t.defaultValue=e),e}),t.dataPrepared$.next(!0),t.validateInnerFormValue()||(t._required?t.writeValue$.next(t.defaultValue?t.defaultValue.forSelectValue:t.defaultValue):t.value=null)})),this.query(),this.initialized$.next(!0)},e.prototype.ngOnChanges=function(e){(e.sourceName&&e.sourceName.currentValue!==e.sourceName.previousValue||e.list&&e.list.currentValue.length!==e.list.previousValue.length||e.rejects&&e.rejects.currentValue.length!==e.rejects.previousValue.length)&&this._service&&this.query()},e.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},e.prototype.query=function(){this.dataPrepared$.next(!1);var e=this._parse(this.sourceName);"list"!==e.name&&"range"!==e.name||!this.list?this._service.query(e.query):this._service.query(this.list)},e.prototype.existsInSelector=function(t){return!(!t&&0!==t)&&this.data.some(function(e){return e.forSelectValue===t})},e.prototype.observer=function(){if(!this._service){var e=this._parse(this.sourceName);if("list"===e.name)this._service=new I;else if("range"===e.name){if(e.query.to===undefined)throw Error("range.to is required");e.query.from=parseInt(e.query.from||0,10),e.query.to=parseInt(e.query.to||0,10),e.query["default"]=parseInt(e.query["default"]||0,10),e.query.step=parseInt(e.query.step||1,10),e.query.unit=e.query.unit||"",this.list=[];for(var t=e.query.from;t<=e.query.to;t+=e.query.step)this.list.push({name:t.toString()+e.query.unit,value:t,"default":t===e.query["default"]});this._service=new I}else{var n=this.services.get(e.name);if(!n)throw Error("not exists service: "+e.name);this._service=n}}return this._service.list()},e.prototype._parse=function(e){var t=e.split(":"),n={};return t[1]&&t[1].split("&").forEach(function(e){var t=e.split("=");n[t[0]]!==undefined?(n[t[0]]instanceof Array||(n[t[0]]=[n[t[0]]]),n[t[0]].push(t[1])):n[t[0]]=t[1]}),{name:t[0],query:n}},e.prototype.validateInnerFormValue=function(){return!(this._required&&!this.innerFormControl.value&&0!==this.innerFormControl.value||!this.existsInSelector(this.innerFormControl.value)&&(this.innerFormControl.value||0===this.innerFormControl.value))},e.prototype.writeValue=function(e){this.isEffectiveValue(e)||!this._required?this.writeValue$.next(e):this.isEffectiveValue(this.defaultValue)?this.writeValue$.next(this.defaultValue.forSelectValue):this.isEffectiveValue(this.innerFormControl.value)&&this.writeValue$.next(this.innerFormControl.value)},e.prototype.registerOnChange=function(e){this.onChangePropagate=e,this.onChangeEventPrepared$.next(!0)},e.prototype.registerOnTouched=function(e){},e.prototype.isEffectiveValue=function(e){return!!e||0===e},e}(),w=function(n){function e(e){var t=n.call(this,e)||this;return t.valueType="number",t.list=[],t.rejects=[],t.filteredData=[],t.width="",t.selectedNames=[],t._detaPrepared=!1,t.dataPrepared$.subscribe(function(e){return t._detaPrepared=!!e}),t}return u(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this._value instanceof Array?this._value:[this._value]},set:function(e){var t=this;this._value=e instanceof Array?e:null!==e?[e]:[],this.onChangePropagate(this.value),this.selectedNames=this.data.filter(function(e){return-1!==t._value.indexOf(e.forSelectValue)}).map(function(e){return e.forSelectName})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;n.prototype.ngOnInit.call(this),this.filter?(this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e}),i.combineLatest(this.filter.onChange),i.delay(0)).subscribe(function(e){t.filteredData=t.filter.filter(t.data),9<t.filteredData.length&&(t.width=(15*t.filteredData.reduce(function(e,t){return e<t.forSelectName.length?t.forSelectName.length:e},0)).toString()+"px")})),this.filter.trigger()):this.subscriptions.add(this.dataPrepared$.pipe(i.filter(function(e){return!!e})).subscribe(function(e){t.filteredData=t.data.filter(function(e){return!0})})),this._detaPrepared&&this.dataPrepared$.next(!0)},e.prototype.onChange=function(e,t){e.target.checked?("object"===this.valueType&&(t=this.data.find(function(e){return e.forSelectValue===t})),this.value=p(this.value.filter(function(e){return!!e}),[t])):"object"===this.valueType?this.value=this.value.filter(function(e){return!!e&&e.value!==t}):this.value=this.value.filter(function(e){return e!==t})},e.prototype.allCheck=function(){var t=this;this.value=p(this._value,this.filteredData.filter(function(e){return-1===t._value.indexOf(e.forSelectValue)}).map(function(e){return e.forSelectValue}))},e.prototype.allClear=function(){var t=this.filteredData.map(function(e){return e.forSelectValue});this.value=this._value.filter(function(e){return-1===t.indexOf(e)})},e.prototype.existsInSelector=function(e){var n=this,t=!e||e instanceof Array?e:[e];return!t||!t.length||t.reduce(function(e,t){return e||n.data.some(function(e){return e.forSelectValue===t})},!1)},e.prototype.writeValue=function(e){this._value=e,this.innerFormControl.patchValue(e)},e}(x);w.decorators=[{type:n.Component,args:[{selector:"afc-checkbox",template:'\n    <p>{{ label }}</p>\n    <div *ngIf="!!filter">\n      <div class="form-group col-md-12">\n        <div class="col-md-2">\n          <p class="fit">表示中の選択肢すべてを</p>\n          <button type="button" class="btn btn-info btn-sm" (click)="allCheck()">選択</button>\n          <button type="button" class="btn btn-warning btn-sm" (click)="allClear()">クリア</button>\n        </div>\n      </div>\n    </div>\n    <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n    <label class="checkbox-inline hidden"></label>\n    <label htmlFor="{{ id }}_{{ item.forSelectValue }}" *ngFor="let item of filteredData"\n        class="checkbox-inline custom-checkbox nowrap margin-bottom">\n      <input id="{{ id }}_{{ item.forSelectValue }}" type="checkbox" class="form-control"\n        (change)="onChange($event, item.forSelectValue)" [checked]="value.indexOf(item.forSelectValue) !== -1">\n      <span [ngClass]="{\'selected\': value.indexOf(item.forSelectValue) !== -1}"\n        [style.width]="width" [innerHtml]="item.forSelectName"></span>\n    </label>\n  ',styles:["\n    span.selected {\n      text-decoration: underline;\n      text-decoration-style: double;\n    }\n  ","\n    label.margin-bottom {\n      margin-bottom: 20px;\n    }\n  ","\n    p.fit {\n      margin-bottom: 0;\n    }\n  "],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return w}),multi:!0},v]}]}],w.ctorParameters=function(){return[{type:v}]},w.propDecorators={formControl:[{type:n.Input}],sourceName:[{type:n.Input}],label:[{type:n.Input}],valueType:[{type:n.Input}],list:[{type:n.Input}],rejects:[{type:n.Input}],filter:[{type:n.Input}]};var j=function(n){function e(e){var t=n.call(this,e)||this;return t.valueType="number",t.list=[],t.rejects=[],t}return u(e,n),e}(x);j.decorators=[{type:n.Component,args:[{selector:"afc-radio",template:'\n    <p *ngIf="!!label"><span [hidden]="!required">*&nbsp;</span>{{ label }}</p>\n    <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n    <label htmlFor="{{ id }}_{{ item.forSelectValue }}" *ngFor="let item of data" class="radio-inline custom-radio nowrap">\n      <input id="{{ id }}_{{ item.forSelectValue }}" type="radio" class="form-control" name="{{ id }}"\n        [value]="item.forSelectValue" [formControl]="innerFormControl">\n      <span [innerHtml]="item.forSelectName"></span>\n    </label>\n  ',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return j}),multi:!0},v]}]}],j.ctorParameters=function(){return[{type:v}]},j.propDecorators={formControl:[{type:n.Input}],sourceName:[{type:n.Input}],label:[{type:n.Input}],valueType:[{type:n.Input}],list:[{type:n.Input}],rejects:[{type:n.Input}]};var O=function(t){function e(e){var n=t.call(this,e)||this;return n.valueType="number",n.list=[],n.rejects=[],n.selected=null,n._readonly=!1,n.dataPrepared$.pipe(i.filter(function(e){return!!e}),i.combineLatest(n.innerFormControl.valueChanges)).subscribe(function(t){n.selected=n.data.find(function(e){return e.forSelectValue===t[1]})}),n}return u(e,t),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),e}(x);O.decorators=[{type:n.Component,args:[{selector:"afc-select",template:'\n    <label *ngIf="label" [htmlFor]="id"><span [hidden]="!required">*&nbsp;</span>{{ label }}</label>\n    <ng-container *ngIf="!readonly">\n      <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n      <select [id]="id" class="form-control" [formControl]="innerFormControl" [required]="required">\n        <option *ngIf="!required" [ngValue]="null"></option>\n        <option *ngFor="let item of data" [ngValue]="item.forSelectValue" [innerHtml]="item.forSelectName"></option>\n      </select>\n    </ng-container>\n    <ng-container *ngIf="readonly">\n      <span class="form-control" readonly [innerHtml]="selected?.forSelectName"></span>\n    </ng-container>\n  ',styles:["\n    span.selected {\n      text-decoration: underline;\n      text-decoration-style: double;\n    }\n  "],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return O}),multi:!0},v]}]}],O.ctorParameters=function(){return[{type:v}]},O.propDecorators={formControl:[{type:n.Input}],sourceName:[{type:n.Input}],label:[{type:n.Input}],valueType:[{type:n.Input}],list:[{type:n.Input}],rejects:[{type:n.Input}],readonly:[{type:n.Input}]};var F=function(t){function e(e){var n=t.call(this,e)||this;return n.valueType="number",n.rejects=[],n.placeholder="",n._readonly=!1,n.selected=null,n._data=[],n.valueTrigger$=new o.Subject,n.preparedElement$=new o.Subject,n.mySubscriptions=new a.Subscription,n.onChangePropagate=function(){},n.mySubscriptions.add(n.dataPrepared$.pipe(i.combineLatest(n.preparedElement$),i.filter(function(e){return!!e[0]&&!!e[1]}),i.combineLatest(n.valueTrigger$),i.delay(0)).subscribe(function(t){n.element&&n.element.val(t[1]).trigger("change").trigger("select2:select"),n.selected=n._data.find(function(e){return e.forSelectValue===t[1]})})),n}return u(e,t),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.renderSelect2()},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var n=this;this.selector&&(this.element=jQuery(this.selector.nativeElement),this.renderSelect2(),this.element.on("select2:select",function(){var t=n.selector.nativeElement.value;/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),n._value!==t&&("object"===n.valueType&&(t=n.data.find(function(e){return e.forSelectValue===t})),n._value=t,n.onChangePropagate(t))})),this.preparedElement$.next(!0),this.mySubscriptions.add(this.innerFormControl.valueChanges.subscribe(function(e){n.valueTrigger$.next(e)}))},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.mySubscriptions.unsubscribe(),this.element&&this.element.off("select2:select")},e.prototype.renderSelect2=function(){this.element&&(!0===this.element.hasClass("select2-hidden-accessible")&&(this.element.select2("destroy"),this.element.html("")),this.element.select2({data:this._data.map(function(e){return{id:e.forSelectValue,text:e.forSelectName}}),theme:"bootstrap",placeholder:this.placeholder,allowClear:!this._required}),this.valueTrigger$.next(this.formControl.value))},e}(x);F.decorators=[{type:n.Component,args:[{selector:"afc-select2",template:'\n    <label><span [hidden]="!required">*&nbsp;</span>{{ label }}</label>\n    <ng-container *ngIf="!readonly">\n      <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n      <div>\n        <select #selector class="form-control"></select>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="readonly">\n      <span class="form-control" readonly [innerHtml]="selected?.forSelectName"></span>\n    </ng-container>\n  ',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return F}),multi:!0},v]}]}],F.ctorParameters=function(){return[{type:v}]},F.propDecorators={formControl:[{type:n.Input}],sourceName:[{type:n.Input}],label:[{type:n.Input}],valueType:[{type:n.Input}],list:[{type:n.Input}],rejects:[{type:n.Input}],placeholder:[{type:n.Input}],readonly:[{type:n.Input}],selector:[{type:n.ViewChild,args:["selector"]}]};var P=function(){function e(){this._readonly=!1,this.required=!1,this.subscription=new a.Subscription,this.readonlyFormControl=new r.FormControl}return Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.readonlyFormControl.disable(),this.trueValueLabel=this.trueValueLabel?this.trueValueLabel:this.label;var e=this.formControl.validator&&this.formControl.validator(new r.FormControl);this.required=e&&!!e.required,this.subscription.add(this.formControl.valueChanges.pipe(i.filter(function(e){return!e&&!1!==e})).subscribe(function(e){t.onChangePropagate(!1)}))},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.writeValue=function(e){this.readonlyFormControl.patchValue(e)},e.prototype.registerOnChange=function(e){this.onChangePropagate=e},e.prototype.registerOnTouched=function(e){},e}();P.decorators=[{type:n.Component,args:[{selector:"afc-single-checkbox",template:'\n    <p *ngIf="!!label"><span *ngIf="required">*&nbsp;</span>{{ label }}</p>\n    <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n    <label class="checkbox-inline custom-checkbox nowrap">\n      <input type="checkbox" class="form-control" *ngIf="!readonly" [formControl]="formControl">\n      <input type="checkbox" class="form-control" *ngIf="readonly" [formControl]="readonlyFormControl">\n      <span>{{ trueValueLabel }}</span>\n    </label>\n  ',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return P}),multi:!0}]}]}],P.ctorParameters=function(){return[]},P.propDecorators={formControl:[{type:n.Input}],label:[{type:n.Input}],trueValueLabel:[{type:n.Input}],readonly:[{type:n.Input}]};var E=function(){function e(){}return e.prototype.ngOnInit=function(){var e=this.formControl.validator&&this.formControl.validator(new r.FormControl);this.required=e&&!!e.required},e.prototype.writeValue=function(e){},e.prototype.registerOnChange=function(e){},e.prototype.registerOnTouched=function(e){},e}();E.decorators=[{type:n.Component,args:[{selector:"afc-textarea",template:'\n    <label *ngIf="label"><span *ngIf="required">*&nbsp;</span>{{ label }}</label>\n    <afc-validate-message [control]="formControl" [name]="label"><ng-content></ng-content></afc-validate-message>\n    <textarea [formControl]="formControl" class="form-control"></textarea>\n  ',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return E}),multi:!0}]}]}],E.ctorParameters=function(){return[]},E.propDecorators={formControl:[{type:n.Input}],label:[{type:n.Input}]};var q=function(){function e(e){this.messageFactoryService=e,this.name="",this.subscription=new a.Subscription,this.messages=[]}return e.prototype.ngOnInit=function(){var t=this;this.subscription.add(this.control.valueChanges.subscribe(function(e){t.control.errors&&(t.messages=t.messageFactoryService.create(t.control.errors,t.name))})),this.control.errors&&(this.messages=this.messageFactoryService.create(this.control.errors,this.name))},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e}();q.decorators=[{type:n.Component,args:[{selector:"afc-validate-message",template:'\n    <div>\n      <span class="validation-errors" *ngIf="control.touched && control.invalid">\n        <ng-content></ng-content>\n        <p *ngFor="let m of messages">{{ m }}</p>\n      </span>\n    </div>\n  ',styles:["\n    div {\n      position: relative;\n    }\n  ","\n    span.validation-errors {\n      position: absolute;\n      color: #ffffff;\n      bottom: 70%;\n      right: -20px;\n      padding: 7px;\n      background-color: #bd362f;\n      border-radius: 7px;\n      z-index: 10000;\n    }\n  ",'\n    span.validation-errors:before {\n      content: "";\n      position: absolute;\n      top: 100%;\n      left: 50%;\n      margin-left: -7px;\n      border: 7px solid transparent;\n      border-top: 7px solid #bd362f;\n      z-index: 10000;\n    }\n  ',"\n    p {\n      margin: 0;\n      padding: 0;\n    }\n  "]}]}],q.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[C]}]}]},q.propDecorators={control:[{type:n.Input}],name:[{type:n.Input}]};var A=[f,m,w,j,O,F,P,E,q],R=function(){};R.decorators=[{type:n.NgModule,args:[{imports:[l.CommonModule,r.FormsModule,r.ReactiveFormsModule],providers:[_,{provide:C,useExisting:_}],declarations:p(A),exports:p(A)}]}],e.AngularFormComponentsModule=R,e.AfcInputComponent=f,e.AfcNumberComponent=m,e.AfcCheckboxComponent=w,e.AfcRadioComponent=j,e.AfcSelectComponent=O,e.AfcSelect2Component=F,e.AfcSingleCheckboxComponent=P,e.AfcTextareaComponent=E,e.AfcValidateMessageComponent=q,e.FilterService=y,e.Selectable=g,e.MULTI_IMPORT_SERVICES_MAP=b,e.SelectorServiceInjector=v,e.ERROR_MESSAGE_FACTORY_SERVICE=C,e.NopeErrorMessageFactoryService=_,e.ɵa=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-form-components.umd.min.js.map
